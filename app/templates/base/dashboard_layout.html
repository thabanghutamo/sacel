<!DOCTYPE html><!DOCTYPE html>

<html lang="en"><html lang="en">

<head><head>

    <meta charset="UTF-8">    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>{% block title %}SACEL Dashboard{% endblock %}</title>    <title>{% block title %}SACEL - South African Comprehensive Education & Learning{% endblock %}</title>

        

    <!-- Inter Font -->    <!-- Tailwind CSS -->

    <link rel="preconnect" href="https://fonts.googleapis.com">    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>    

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">    <!-- Custom CSS -->

        <link rel="stylesheet" href="{{ url_for('static', filename='css/custom.css') }}">

    <!-- Modern Dashboard Styles -->    

    <style>    <!-- Debug styles for visibility -->

        :root {    <style>

            --primary-600: #2563eb;        body { 

            --primary-700: #1d4ed8;            background-color: #f9fafb !important; 

            --primary-50: #eff6ff;            color: #111827 !important;

            --primary-100: #dbeafe;            font-family: system-ui, -apple-system, sans-serif !important;

                    }

            --gray-50: #f8fafc;        .content-debug {

            --gray-100: #f1f5f9;            background-color: #ffffff !important;

            --gray-200: #e2e8f0;            border: 2px solid #3b82f6 !important;

            --gray-300: #cbd5e1;            padding: 1rem !important;

            --gray-400: #94a3b8;            margin: 1rem 0 !important;

            --gray-500: #64748b;            border-radius: 8px !important;

            --gray-600: #475569;        }

            --gray-700: #334155;        * {

            --gray-800: #1e293b;            visibility: visible !important;

            --gray-900: #0f172a;            opacity: 1 !important;

                    }

            --success: #10b981;        h1, h2, h3, h4, h5, h6 {

            --warning: #f59e0b;            color: #111827 !important;

            --danger: #ef4444;            font-weight: 600 !important;

            --white: #ffffff;        }

                    .bg-white {

            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);            background-color: #ffffff !important;

            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);        }

            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);        .text-gray-900 {

                        color: #111827 !important;

            --radius-lg: 0.75rem;        }

            --radius-xl: 1rem;        .text-gray-600 {

            --radius-2xl: 1.5rem;            color: #4b5563 !important;

            --radius-full: 9999px;        }

                    .text-gray-500 {

            --space-2: 0.5rem;            color: #6b7280 !important;

            --space-3: 0.75rem;        }

            --space-4: 1rem;    </style>

            --space-5: 1.25rem;    

            --space-6: 1.5rem;    <!-- Professional Icons - Heroicons + Lucide -->

            --space-8: 2rem;    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

        }    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/heroicons@2.0.18/24/outline/style.css">

            

        * {    <!-- Professional Icon Font -->

            box-sizing: border-box;    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/feather-icons@4.29.0/dist/feather.min.css">

            margin: 0;    

            padding: 0;    <!-- Favicon -->

        }    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">

            

        body {    <!-- CSRF Token for AJAX requests -->

            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;    <meta name="csrf-token" content="{{ csrf_token() }}">

            background-color: var(--gray-50);    

            color: var(--gray-800);    {% block extra_head %}{% endblock %}

            line-height: 1.5;</head>

        }<body class="bg-gray-100 font-sans">

            <!-- Dashboard Layout for Authenticated Users -->

        /* Mobile-first layout */    <div class="flex h-screen overflow-hidden">

        .dashboard-container {        <!-- Sidebar -->

            display: flex;        <div class="bg-white shadow-lg w-64 flex-shrink-0">

            flex-direction: column;            <!-- Logo Section -->

            min-height: 100vh;            <div class="p-6 border-b border-gray-200">

        }                <div class="flex items-center">

                            <div class="w-10 h-10 bg-accent-600 rounded-lg flex items-center justify-center">

        /* Mobile Header */                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">

        .mobile-header {                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>

            background: var(--white);                        </svg>

            padding: var(--space-4);                    </div>

            border-bottom: 1px solid var(--gray-200);                    <div class="ml-3">

            box-shadow: var(--shadow-sm);                        <h1 class="text-xl font-semibold text-gray-900">SACEL</h1>

            display: flex;                        <p class="text-xs text-gray-500">Education Platform</p>

            align-items: center;                    </div>

            justify-content: space-between;                </div>

            position: sticky;            </div>

            top: 0;

            z-index: 1000;            <!-- User Profile Section -->

        }            {% if current_user.is_authenticated %}

                    <div class="p-6 border-b border-gray-200">

        .mobile-header .logo {                <div class="flex items-center">

            display: flex;                    <div class="w-12 h-12 bg-gradient-to-br from-accent-500 to-accent-600 rounded-full flex items-center justify-center">

            align-items: center;                        <span class="text-white font-semibold text-lg">

            gap: var(--space-3);                            {{ current_user.first_name[0] if current_user.first_name else 'U' }}{{ current_user.last_name[0] if current_user.last_name else 'S' }}

            color: var(--primary-600);                        </span>

            font-weight: 600;                    </div>

            font-size: 1.125rem;                    <div class="ml-3 flex-1">

        }                        <h3 class="text-sm font-medium text-gray-900">{{ current_user.first_name or 'User' }} {{ current_user.last_name or 'Name' }}</h3>

                                <p class="text-xs text-gray-500 capitalize">{{ current_user.role.value.replace('_', ' ') if current_user.role else 'Guest' }}</p>

        .mobile-header .user-info {                        <div class="flex items-center mt-1">

            display: flex;                            <div class="w-2 h-2 bg-green-400 rounded-full"></div>

            align-items: center;                            <span class="text-xs text-gray-500 ml-1">Online</span>

            gap: var(--space-3);                        </div>

        }                    </div>

                        </div>

        .avatar {            </div>

            width: 40px;            {% else %}

            height: 40px;            <!-- Guest User Section -->

            border-radius: var(--radius-full);            <div class="p-6 border-b border-gray-200">

            background: var(--primary-100);                <div class="flex items-center">

            display: flex;                    <div class="w-12 h-12 bg-gray-400 rounded-full flex items-center justify-center">

            align-items: center;                        <span class="text-white font-semibold text-lg">

            justify-content: center;                            G

            color: var(--primary-600);                        </span>

            font-weight: 600;                    </div>

        }                    <div class="ml-3 flex-1">

                                <h3 class="text-sm font-semibold text-gray-800">Guest User</h3>

        /* Main Content */                        <p class="text-xs text-gray-500">Not logged in</p>

        .main-content {                    </div>

            flex: 1;                </div>

            padding: var(--space-6) var(--space-4);            </div>

            padding-bottom: 100px; /* Space for mobile nav */            {% endif %}

        }

                    <!-- Navigation Menu -->

        /* Mobile Bottom Navigation */            <nav class="px-4 py-4">

        .mobile-nav {                <ul class="space-y-2">

            position: fixed;                    {% if current_user.is_authenticated %}

            bottom: 0;                    <!-- Dashboard -->

            left: 0;                    <li>

            right: 0;                        <a href="{% if current_user.role.value == 'student' %}{{ url_for('student_portal.dashboard') }}{% elif current_user.role.value == 'teacher' %}{{ url_for('teachers.dashboard') }}{% else %}{{ url_for('admin.dashboard') }}{% endif %}" 

            background: var(--white);                           class="nav-link">

            border-top: 1px solid var(--gray-200);                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">

            padding: var(--space-2) 0;                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"></path>

            box-shadow: var(--shadow-lg);                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5a2 2 0 012-2h4a2 2 0 012 2v2H8V5z"></path>

            z-index: 1000;                            </svg>

        }                            <span class="ml-3">{{ translate_term('dashboard') }}</span>

                                </a>

        .mobile-nav-grid {                    </li>

            display: grid;

            grid-template-columns: repeat(5, 1fr);                    {% if current_user.role.value == 'student' %}

            gap: var(--space-2);                    <!-- Student Menu Items -->

            max-width: 500px;                    <li>

            margin: 0 auto;                        <a href="{{ url_for('student_portal.assignments') }}" 

            padding: 0 var(--space-4);                           class="nav-link">

        }                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">

                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>

        .mobile-nav-item {                            </svg>

            display: flex;                            <span class="ml-3">{{ translate_term('my_assignments') }}</span>

            flex-direction: column;                        </a>

            align-items: center;                    </li>

            padding: var(--space-2);                    <li>

            border-radius: var(--radius-lg);                        <a href="{{ url_for('student_portal.progress') }}" 

            text-decoration: none;                           class="nav-link">

            color: var(--gray-500);                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">

            font-size: 0.75rem;                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>

            font-weight: 500;                            </svg>

            transition: all 0.2s;                            <span class="ml-3">{{ translate_term('progress') }}</span>

        }                        </a>

                            </li>

        .mobile-nav-item.active {                    <li>

            color: var(--primary-600);                        <a href="#" class="nav-link">

            background: var(--primary-50);                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">

        }                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3a4 4 0 118 0v4m-4 4v6m-4-6h8m-4-4a4 4 0 11-8 0V3a4 4 0 118 0v4"></path>

                                    </svg>

        .mobile-nav-item:hover {                            <span class="ml-3">Calendar</span>

            color: var(--primary-600);                        </a>

            background: var(--primary-50);                    </li>

        }

                            {% elif current_user.role.value == 'teacher' %}

        .nav-icon {                    <!-- Teacher Menu Items -->

            width: 24px;                    <li>

            height: 24px;                        <a href="{{ url_for('teachers.create_advanced_assignment') }}" 

            margin-bottom: var(--space-1);                           class="flex items-center px-3 py-2 text-gray-700 rounded-lg hover:bg-blue-50 hover:text-blue-700 transition-colors">

        }                            <i class="fas fa-plus-circle w-5 h-5"></i>

                                    <span class="ml-3">Create Assignment</span>

        /* Desktop Sidebar - Hidden on mobile */                        </a>

        .sidebar {                    </li>

            display: none;                    <li>

        }                        <a href="{{ url_for('teachers.grading') }}" 

                                   class="flex items-center px-3 py-2 text-gray-700 rounded-lg hover:bg-blue-50 hover:text-blue-700 transition-colors">

        /* Tablet and Desktop Styles */                            <i class="fas fa-check-circle w-5 h-5"></i>

        @media (min-width: 1024px) {                            <span class="ml-3">Grade Assignments</span>

            .dashboard-container {                        </a>

                flex-direction: row;                    </li>

            }                    <li>

                                    <a href="{{ url_for('analytics.real_time_dashboard') }}" 

            .mobile-header {                           class="flex items-center px-3 py-2 text-gray-700 rounded-lg hover:bg-blue-50 hover:text-blue-700 transition-colors">

                display: none;                            <i class="fas fa-chart-bar w-5 h-5"></i>

            }                            <span class="ml-3">Analytics</span>

                                    </a>

            .mobile-nav {                    </li>

                display: none;                    <li>

            }                        <a href="{{ url_for('teachers.communication') }}" 

                                       class="flex items-center px-3 py-2 text-gray-700 rounded-lg hover:bg-blue-50 hover:text-blue-700 transition-colors">

            .sidebar {                            <i class="fas fa-comments w-5 h-5"></i>

                display: block;                            <span class="ml-3">Messages</span>

                width: 280px;                        </a>

                background: var(--white);                    </li>

                border-right: 1px solid var(--gray-200);

                height: 100vh;                    {% else %}

                position: fixed;                    <!-- Admin Menu Items -->

                left: 0;                    <li>

                top: 0;                        <a href="{{ url_for('admin.users') }}" 

                overflow-y: auto;                           class="flex items-center px-3 py-2 text-gray-700 rounded-lg hover:bg-blue-50 hover:text-blue-700 transition-colors">

                box-shadow: var(--shadow-sm);                            <i class="fas fa-users w-5 h-5"></i>

            }                            <span class="ml-3">Users</span>

                                    </a>

            .sidebar-header {                    </li>

                padding: var(--space-6);                    <li>

                border-bottom: 1px solid var(--gray-200);                        <a href="{{ url_for('admin.schools') }}" 

                background: var(--gray-50);                           class="flex items-center px-3 py-2 text-gray-700 rounded-lg hover:bg-blue-50 hover:text-blue-700 transition-colors">

            }                            <i class="fas fa-school w-5 h-5"></i>

                                        <span class="ml-3">Schools</span>

            .sidebar-nav {                        </a>

                padding: var(--space-4);                    </li>

            }                    <li>

                                    <a href="{{ url_for('analytics.real_time_dashboard') }}" 

            .nav-group {                           class="flex items-center px-3 py-2 text-gray-700 rounded-lg hover:bg-blue-50 hover:text-blue-700 transition-colors">

                margin-bottom: var(--space-6);                            <i class="fas fa-chart-bar w-5 h-5"></i>

            }                            <span class="ml-3">Analytics</span>

                                    </a>

            .nav-group-title {                    </li>

                font-size: 0.75rem;                    {% endif %}

                font-weight: 600;

                color: var(--gray-500);                    <!-- Common Menu Items -->

                text-transform: uppercase;                    <li>

                letter-spacing: 0.05em;                        <a href="{{ url_for('search.search_interface') }}" 

                margin-bottom: var(--space-3);                           class="flex items-center px-3 py-2 text-gray-700 rounded-lg hover:bg-blue-50 hover:text-blue-700 transition-colors">

                padding: 0 var(--space-3);                            <i class="fas fa-search w-5 h-5"></i>

            }                            <span class="ml-3">Search</span>

                                    </a>

            .nav-item {                    </li>

                display: flex;                    <li>

                align-items: center;                        <a href="{{ url_for('public.upload') }}" 

                gap: var(--space-3);                           class="flex items-center px-3 py-2 text-gray-700 rounded-lg hover:bg-blue-50 hover:text-blue-700 transition-colors">

                padding: var(--space-3);                            <i class="fas fa-upload w-5 h-5"></i>

                border-radius: var(--radius-lg);                            <span class="ml-3">Upload Files</span>

                color: var(--gray-700);                        </a>

                text-decoration: none;                    </li>

                font-weight: 500;                </ul>

                transition: all 0.2s;

                margin-bottom: var(--space-1);                <!-- Divider -->

            }                <div class="border-t border-gray-200 my-4"></div>

            

            .nav-item:hover {                <!-- Secondary Menu -->

                background: var(--gray-100);                <ul class="space-y-2">

                color: var(--gray-900);                    <li>

            }                        <a href="{{ url_for('public.language_demo') }}" 

                                       class="flex items-center px-3 py-2 text-gray-700 rounded-lg hover:bg-blue-50 hover:text-blue-700 transition-colors">

            .nav-item.active {                            <i class="fas fa-globe w-5 h-5"></i>

                background: var(--primary-50);                            <span class="ml-3">Languages</span>

                color: var(--primary-700);                        </a>

            }                    </li>

                                <li>

            .main-content {                        <a href="#" id="settingsBtn"

                margin-left: 280px;                           class="flex items-center px-3 py-2 text-gray-700 rounded-lg hover:bg-blue-50 hover:text-blue-700 transition-colors">

                padding: var(--space-8);                            <i class="fas fa-cog w-5 h-5"></i>

                padding-bottom: var(--space-8);                            <span class="ml-3">Settings</span>

            }                        </a>

                                </li>

            .desktop-header {                    <li>

                background: var(--white);                        <a href="{{ url_for('auth.logout') }}" 

                border-bottom: 1px solid var(--gray-200);                           class="flex items-center px-3 py-2 text-red-600 rounded-lg hover:bg-red-50 transition-colors">

                padding: var(--space-4) var(--space-8);                            <i class="fas fa-sign-out-alt w-5 h-5"></i>

                margin: calc(-1 * var(--space-8)) calc(-1 * var(--space-8)) var(--space-8);                            <span class="ml-3">{{ translate_term('nav_logout') }}</span>

                position: sticky;                        </a>

                top: 0;                    </li>

                z-index: 100;                    {% else %}

                box-shadow: var(--shadow-sm);                    <!-- Guest Navigation -->

                display: flex;                    <li>

                align-items: center;                        <a href="{{ url_for('public.home') }}" 

                justify-content: space-between;                           class="flex items-center px-3 py-2 text-gray-700 rounded-lg hover:bg-blue-50 hover:text-blue-700 transition-colors">

            }                            <i class="fas fa-home w-5 h-5"></i>

        }                            <span class="ml-3">Home</span>

                                </a>

        /* Card Styles */                    </li>

        .card {                    <li>

            background: var(--white);                        <a href="{{ url_for('auth.login') }}" 

            border-radius: var(--radius-xl);                           class="flex items-center px-3 py-2 text-blue-600 rounded-lg hover:bg-blue-50 transition-colors">

            box-shadow: var(--shadow-sm);                            <i class="fas fa-sign-in-alt w-5 h-5"></i>

            border: 1px solid var(--gray-200);                            <span class="ml-3">Login</span>

            transition: all 0.2s;                        </a>

            overflow: hidden;                    </li>

        }                    <li>

                                <a href="{{ url_for('auth.register') }}" 

        .card:hover {                           class="flex items-center px-3 py-2 text-green-600 rounded-lg hover:bg-green-50 transition-colors">

            box-shadow: var(--shadow-md);                            <i class="fas fa-user-plus w-5 h-5"></i>

            transform: translateY(-2px);                            <span class="ml-3">Register</span>

        }                        </a>

                            </li>

        .card-body {                    {% endif %}

            padding: var(--space-6);                </ul>

        }            </nav>

                </div>

        /* Button Styles */

        .btn {        <!-- Main Content Area -->

            display: inline-flex;        <div class="flex-1 flex flex-col overflow-hidden">

            align-items: center;            <!-- Top Header -->

            justify-content: center;            <header class="bg-white shadow-sm border-b border-gray-200 px-6 py-4">

            gap: var(--space-2);                <div class="flex items-center justify-between">

            padding: var(--space-3) var(--space-6);                    <div>

            border-radius: var(--radius-lg);                        <h1 class="text-2xl font-semibold text-gray-800">

            font-weight: 500;                            {% block page_title %}Dashboard{% endblock %}

            font-size: 0.875rem;                        </h1>

            line-height: 1;                        <p class="text-sm text-gray-600 mt-1">

            border: none;                            {% block page_subtitle %}Welcome to your dashboard{% endblock %}

            cursor: pointer;                        </p>

            transition: all 0.2s;                    </div>

            text-decoration: none;                    

        }                    <div class="flex items-center space-x-4">

                                <!-- Language Selector -->

        .btn-primary {                        <div class="relative">

            background: linear-gradient(135deg, var(--primary-600), var(--primary-700));                            <select id="languageSelector" 

            color: var(--white);                                    title="Select Language"

            box-shadow: var(--shadow-sm);                                    class="bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"

        }                                    onchange="switchLanguage(this.value)">

                                        {% for code, name in get_languages().items() %}

        .btn-primary:hover {                                    <option value="{{ code }}" {% if code == current_language() %}selected{% endif %}>

            transform: translateY(-1px);                                        {{ name }}

            box-shadow: var(--shadow-md);                                    </option>

        }                                {% endfor %}

                                    </select>

        /* Grid System */                        </div>

        .grid {

            display: grid;                        <!-- Notifications -->

            gap: var(--space-6);                        <button class="relative p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors"

        }                                title="Notifications">

                                    <i class="fas fa-bell text-lg"></i>

        .grid-cols-1 { grid-template-columns: repeat(1, 1fr); }                            <span class="absolute top-1 right-1 w-3 h-3 bg-red-500 rounded-full"></span>

        .grid-cols-2 { grid-template-columns: repeat(2, 1fr); }                        </button>

        .grid-cols-3 { grid-template-columns: repeat(3, 1fr); }

        .grid-cols-4 { grid-template-columns: repeat(4, 1fr); }                        <!-- Profile Menu -->

                                {% if current_user.is_authenticated %}

        @media (min-width: 768px) {                        <div class="relative">

            .md\:grid-cols-2 { grid-template-columns: repeat(2, 1fr); }                            <button id="profileMenuBtn" class="flex items-center p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors">

            .md\:grid-cols-3 { grid-template-columns: repeat(3, 1fr); }                                <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center">

            .md\:grid-cols-4 { grid-template-columns: repeat(4, 1fr); }                                    <span class="text-white font-semibold text-sm">

        }                                        {{ current_user.first_name[0] if current_user.first_name else 'U' }}{{ current_user.last_name[0] if current_user.last_name else 'S' }}

                                            </span>

        @media (min-width: 1024px) {                                </div>

            .lg\:grid-cols-3 { grid-template-columns: repeat(3, 1fr); }                                <i class="fas fa-chevron-down ml-2 text-xs"></i>

            .lg\:grid-cols-4 { grid-template-columns: repeat(4, 1fr); }                            </button>

        }                        </div>

                                {% else %}

        /* Flash Messages */                        <!-- Guest Profile -->

        .alert {                        <div class="flex items-center space-x-2">

            padding: var(--space-4);                            <a href="{{ url_for('auth.login') }}" class="px-4 py-2 text-blue-600 hover:text-blue-800 font-medium">Login</a>

            border-radius: var(--radius-lg);                            <a href="{{ url_for('auth.register') }}" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">Register</a>

            margin-bottom: var(--space-4);                        </div>

        }                        {% endif %}

                            </div>

        .alert-success {                </div>

            background: #f0fdf4;            </header>

            border: 1px solid #bbf7d0;

            color: #166534;            <!-- Flash Messages -->

        }            {% with messages = get_flashed_messages(with_categories=true) %}

                        {% if messages %}

        .alert-error {                    <div class="px-6 pt-4">

            background: #fef2f2;                        {% for category, message in messages %}

            border: 1px solid #fecaca;                            <div class="alert alert-{{ category }} p-4 mb-4 rounded-lg {% if category == 'error' %}bg-red-50 border border-red-200 text-red-700{% elif category == 'warning' %}bg-yellow-50 border border-yellow-200 text-yellow-700{% elif category == 'success' %}bg-green-50 border border-green-200 text-green-700{% else %}bg-blue-50 border border-blue-200 text-blue-700{% endif %}">

            color: #dc2626;                                <div class="flex">

        }                                    <div class="flex-shrink-0">

                                                {% if category == 'error' %}

        .alert-warning {                                            <i class="fas fa-exclamation-circle"></i>

            background: #fffbeb;                                        {% elif category == 'warning' %}

            border: 1px solid #fed7aa;                                            <i class="fas fa-exclamation-triangle"></i>

            color: #d97706;                                        {% elif category == 'success' %}

        }                                            <i class="fas fa-check-circle"></i>

                                                {% else %}

        /* Utilities */                                            <i class="fas fa-info-circle"></i>

        .flex { display: flex; }                                        {% endif %}

        .items-center { align-items: center; }                                    </div>

        .justify-between { justify-content: space-between; }                                    <div class="ml-3">

        .gap-3 { gap: var(--space-3); }                                        {{ message }}

        .gap-4 { gap: var(--space-4); }                                    </div>

        .gap-6 { gap: var(--space-6); }                                </div>

        .mb-6 { margin-bottom: var(--space-6); }                            </div>

        .text-gray-600 { color: var(--gray-600); }                        {% endfor %}

        .text-gray-900 { color: var(--gray-900); }                    </div>

        .font-semibold { font-weight: 600; }                {% endif %}

        .text-lg { font-size: 1.125rem; }            {% endwith %}

        .text-2xl { font-size: 1.5rem; }

    </style>            <!-- Main Content -->

                <main class="flex-1 overflow-y-auto bg-gray-50 p-6">

    {% block extra_head %}{% endblock %}                {% block content %}{% endblock %}

</head>            </main>

<body>        </div>

    <div class="dashboard-container">    </div>

        <!-- Mobile Header -->    

        <div class="mobile-header">    <!-- JavaScript -->

            <div class="logo">    <script src="{{ url_for('static', filename='js/main.js') }}"></script>

                <svg class="w-8 h-8" viewBox="0 0 24 24" fill="currentColor">    

                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>    <script>

                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>        // Language switcher

                </svg>        function switchLanguage(languageCode) {

                SACEL            window.location.href = `/set-language/${languageCode}`;

            </div>        }

            {% if current_user.is_authenticated %}

            <div class="user-info">        // Profile menu toggle

                <div class="avatar">        document.getElementById('profileMenuBtn')?.addEventListener('click', function() {

                    {{ current_user.first_name[0] if current_user.first_name else 'U' }}            console.log('Profile menu clicked');

                </div>        });

            </div>

            {% endif %}        // Settings button

        </div>        document.getElementById('settingsBtn')?.addEventListener('click', function(e) {

            e.preventDefault();

        <!-- Desktop Sidebar -->            console.log('Settings clicked');

        {% if current_user.is_authenticated %}        });

        <div class="sidebar">    </script>

            <div class="sidebar-header">    

                <div class="logo">    {% block extra_js %}{% endblock %}

                    <svg class="w-8 h-8" viewBox="0 0 24 24" fill="currentColor"></body>

                        <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/></html>
                        <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
                    </svg>
                    <span>SACEL</span>
                </div>
                <div class="flex items-center gap-3 mt-4">
                    <div class="avatar">
                        {{ current_user.first_name[0] if current_user.first_name else 'U' }}
                    </div>
                    <div>
                        <div class="font-semibold text-gray-900">
                            {{ current_user.first_name }} {{ current_user.last_name }}
                        </div>
                        <div class="text-gray-600 text-sm">{{ current_user.role.title() if current_user.role else 'User' }}</div>
                    </div>
                </div>
            </div>

            <nav class="sidebar-nav">
                <div class="nav-group">
                    <div class="nav-group-title">Dashboard</div>
                    {% if current_user.role and current_user.role.value == 'student' %}
                    <a href="{{ url_for('student_portal.dashboard') }}" class="nav-item">
                    {% elif current_user.role and current_user.role.value == 'teacher' %}
                    <a href="{{ url_for('teachers.dashboard') }}" class="nav-item">
                    {% else %}
                    <a href="#" class="nav-item">
                    {% endif %}
                        <svg class="nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5a2 2 0 012-2h4a2 2 0 012 2v0a2 2 0 01-2 2H10a2 2 0 01-2-2v0z"/>
                        </svg>
                        Dashboard
                    </a>
                </div>

                <div class="nav-group">
                    <div class="nav-group-title">Learning</div>
                    {% if current_user.role and current_user.role.value == 'student' %}
                    <a href="{{ url_for('student_portal.assignments') }}" class="nav-item">
                        <svg class="nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                        </svg>
                        Assignments
                    </a>
                    <a href="{{ url_for('student_portal.progress') }}" class="nav-item">
                        <svg class="nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                        </svg>
                        Progress
                    </a>
                    {% endif %}
                    <a href="#" class="nav-item">
                        <svg class="nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                        </svg>
                        Calendar
                    </a>
                </div>

                {% if current_user.role and current_user.role.value in ['teacher', 'admin'] %}
                <div class="nav-group">
                    <div class="nav-group-title">Teaching</div>
                    <a href="{{ url_for('teachers.dashboard') }}" class="nav-item">
                        <svg class="nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                        </svg>
                        Teacher Dashboard
                    </a>
                    <a href="{{ url_for('teachers.create_advanced_assignment') }}" class="nav-item">
                        <svg class="nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                        </svg>
                        Create Assignment
                    </a>
                    <a href="{{ url_for('teachers.grading') }}" class="nav-item">
                        <svg class="nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"/>
                        </svg>
                        Grade Assignments
                    </a>
                </div>
                {% endif %}

                <div class="nav-group">
                    <div class="nav-group-title">Account</div>
                    <a href="#" class="nav-item">
                        <svg class="nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                        </svg>
                        Profile
                    </a>
                    <a href="{{ url_for('auth.logout') }}" class="nav-item">
                        <svg class="nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
                        </svg>
                        Logout
                    </a>
                </div>
            </nav>
        </div>
        {% endif %}

        <!-- Main Content -->
        <main class="main-content">
            <!-- Desktop Header -->
            <div class="desktop-header" style="display: none;">
                <div>
                    <h1 class="text-2xl font-semibold text-gray-900">{% block page_title %}Dashboard{% endblock %}</h1>
                    <p class="text-gray-600">{% block page_description %}Welcome to your dashboard{% endblock %}</p>
                </div>
                {% if current_user.is_authenticated %}
                <div class="flex items-center gap-3">
                    <div class="avatar">
                        {{ current_user.first_name[0] if current_user.first_name else 'U' }}
                    </div>
                    <div>
                        <div class="font-semibold text-gray-900">
                            {{ current_user.first_name }} {{ current_user.last_name }}
                        </div>
                        <div class="text-gray-600 text-sm">{{ current_user.role.title() if current_user.role else 'User' }}</div>
                    </div>
                </div>
                {% endif %}
            </div>

            <!-- Flash Messages -->
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        <div class="alert alert-{{ category }}">
                            {{ message }}
                        </div>
                    {% endfor %}
                {% endif %}
            {% endwith %}

            {% block content %}{% endblock %}
        </main>

        <!-- Mobile Bottom Navigation -->
        {% if current_user.is_authenticated %}
        <nav class="mobile-nav">
            <div class="mobile-nav-grid">
                {% if current_user.role and current_user.role.value == 'student' %}
                <a href="{{ url_for('student_portal.dashboard') }}" class="mobile-nav-item">
                {% elif current_user.role and current_user.role.value == 'teacher' %}
                <a href="{{ url_for('teachers.dashboard') }}" class="mobile-nav-item">
                {% else %}
                <a href="#" class="mobile-nav-item">
                {% endif %}
                    <svg class="nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"/>
                    </svg>
                    <span>Dashboard</span>
                </a>
                {% if current_user.role and current_user.role.value == 'student' %}
                <a href="{{ url_for('student_portal.assignments') }}" class="mobile-nav-item">
                {% else %}
                <a href="#" class="mobile-nav-item">
                {% endif %}
                    <svg class="nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                    </svg>
                    <span>Tasks</span>
                </a>
                {% if current_user.role and current_user.role.value == 'student' %}
                <a href="{{ url_for('student_portal.progress') }}" class="mobile-nav-item">
                {% else %}
                <a href="#" class="mobile-nav-item">
                {% endif %}
                    <svg class="nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                    </svg>
                    <span>Progress</span>
                </a>
                <a href="#" class="mobile-nav-item">
                    <svg class="nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                    </svg>
                    <span>Calendar</span>
                </a>
                <a href="#" class="mobile-nav-item">
                    <svg class="nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                    </svg>
                    <span>Profile</span>
                </a>
            </div>
        </nav>
        {% endif %}
    </div>

    <script>
        // Modern dashboard JavaScript
        document.addEventListener('DOMContentLoaded', function() {
            // Show desktop header on larger screens
            if (window.innerWidth >= 1024) {
                const desktopHeader = document.querySelector('.desktop-header');
                if (desktopHeader) {
                    desktopHeader.style.display = 'flex';
                }
            }
            
            // Active navigation highlighting
            const currentPath = window.location.pathname;
            const navItems = document.querySelectorAll('.nav-item, .mobile-nav-item');
            
            navItems.forEach(item => {
                if (item.getAttribute('href') === currentPath) {
                    item.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>
